<div class="courier-orders-table">
  <div class="search-container">
    <div class="search-input-wrapper">
      <span class="search-icon">🔍</span>
      <input
        type="text"
        class="search-input"
        placeholder="Search by number, customer, or merchant"
        [(ngModel)]="searchTerm"
        (input)="search()"
      />
      <button *ngIf="searchTerm" class="clear-search" (click)="clearSearch()">✕</button>
    </div>
    <button class="search-button" (click)="search()">Search</button>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Sequential Number</th>
          <th>Status</th>
          <th>Merchant</th>
          <th>Customer</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Order Cost</th>
          <th>Shipping Cost</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="filteredOrders.length === 0">
          <td colspan="10" class="no-data">No data available</td>
        </tr>
        <tr *ngFor="let order of filteredOrders; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ order.sequentialNumber }}</td>
          <td>
            <span [ngClass]="getStatusClass(order.status)" class="status-badge">{{ order.status }}</span>
          </td>
          <td>{{ order.merchant }}</td>
          <td>{{ order.customer }}</td>
          <td>{{ order.phone }}</td>
          <td>{{ order.address }}</td>
          <td>{{ order.orderCost }}</td>
          <td>{{ order.shippingCost }}</td>
          <td>
            <button (click)="openStatusModal(order)">Status</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="modal-overlay" *ngIf="showStatusModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Change Status</h3>
        <button (click)="closeStatusModal()">×</button>
      </div>
      <div class="modal-body">
        <label>Status</label>
        <select #statusSelect>
          <option *ngFor="let status of statusOptions" [value]="status" [selected]="selectedOrder?.status === status">
            {{ status }}
          </option>
        </select>
      </div>
      <div class="modal-footer">
        <button (click)="closeStatusModal()">Cancel</button>
        <button (click)="saveStatus(statusSelect.value)">Save</button>
      </div>
    </div>
  </div>
</div>
