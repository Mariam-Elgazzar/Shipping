<div class="table-container">
  <div class="table-header">
    <h2>Cities</h2>
    <div class="table-actions">
      <input
        type="text"
        placeholder="Search cities..."
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange($event)"
        class="search-input"
      />
    </div>
  </div>

  <table class="city-table">
    <thead>
      <tr>
        <th>
          <input
            type="checkbox"
            [checked]="
              selectedCities.length === filteredCities.length &&
              filteredCities.length > 0
            "
            (change)="toggleSelectAll($event)"
          />
        </th>
        <th>Name</th>
        <th>Governorate</th>
        <th>Charge Price</th>
        <th>PickUp Price</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let city of filteredCities">
        <td>
          <input
            type="checkbox"
            [checked]="selectedCities.includes(city.id)"
            (change)="toggleCitySelection(city.id)"
          />
        </td>
        <td>{{ city.name }}</td>
        <td>{{ city.governorateName }}</td>
        <td>{{ city.chargePrice }}</td>
        <td>{{ city.pickUpPrice }}</td>
        <td>{{ city.isDeleted ? "Deleted" : "Active" }}</td>
        <td>
          <button class="action-btn" (click)="showActionMenu(city.id)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="1"></circle>
              <circle cx="12" cy="5" r="1"></circle>
              <circle cx="12" cy="19" r="1"></circle>
            </svg>
          </button>
          <div class="action-menu" *ngIf="activeActionMenu === city.id">
            <button (click)="viewCityDetails(city.id)">View Details</button>
            <button (click)="editCity(city.id)">Edit</button>
            <button (click)="deleteCity(city.id)">Delete</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <app-city-details
    *ngIf="isCityDetailsVisible"
    [cityId]="selectedCityId"
    (close)="closeCityDetails()"
  ></app-city-details>
</div>
